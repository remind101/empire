.PHONY: cmd build test

cmd:
	godep go build -o build/empire ./cmd/empire

bootstrap: cmd
	go get github.com/heroku/hk
	go build -o build/hk github.com/heroku/hk # The current stable release doesn't have a bugfix we need for plugins.
	createdb empire
	./build/empire migrate

build: Dockerfile.alpine
	docker build --no-cache -f Dockerfile.alpine -t remind101/empire .

test:
	godep go test ./... && godep go vet ./...
